"use strict";(self.webpackChunkdistributed_systems=self.webpackChunkdistributed_systems||[]).push([[595],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),o=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=o(e.components);return a.createElement(p.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=o(t),m=r,g=c["".concat(p,".").concat(m)]||c[m]||d[m]||i;return t?a.createElement(g,l(l({ref:n},u),{},{components:t})):a.createElement(g,l({ref:n},u))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=c;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var o=2;o<i;o++)l[o]=t[o];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},7746:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>o});var a=t(7462),r=(t(7294),t(3905));const i={},l="Web API Design",s={unversionedId:"labs/web-api-design/web-api-design",id:"labs/web-api-design/web-api-design",title:"Web API Design",description:"Table of Contents",source:"@site/docs/labs/05.web-api-design/web-api-design.md",sourceDirName:"labs/05.web-api-design",slug:"/labs/web-api-design/web-api-design",permalink:"/docs/labs/web-api-design/web-api-design",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"HTTP Programming",permalink:"/docs/labs/http-programming/http-programming"},next:{title:"Student Assignments",permalink:"/docs/students/student-assignments"}},p={},o=[{value:"<strong>Table of Contents</strong>",id:"table-of-contents",level:2},{value:"<strong>Requirements</strong>",id:"requirements",level:3},{value:"<strong>Objectives</strong>",id:"objectives",level:3},{value:"<strong>Web API</strong>",id:"web-api",level:3},{value:"<strong>SOA</strong>",id:"soa",level:3},{value:"<strong>Exercise 1: GraphQL Queries</strong>",id:"exercise-1-graphql-queries",level:2},{value:"<strong>Create Solution and Project</strong>",id:"create-solution-and-project",level:3},{value:"<strong>Run and test project</strong>",id:"run-and-test-project",level:3},{value:"<strong>Exercise 2: GraphQL Mutations</strong>",id:"exercise-2-graphql-mutations",level:2},{value:"<strong>Run and test project</strong>",id:"run-and-test-project-1",level:3}],u={toc:o};function d(e){let{components:n,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,i,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"web-api-design"},"Web API Design"),(0,r.kt)("h2",{id:"table-of-contents"},(0,r.kt)("strong",{parentName:"h2"},"Table of Contents")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#web-api-design"},"Web API Design"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#table-of-contents"},(0,r.kt)("strong",{parentName:"a"},"Table of Contents")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#requirements"},(0,r.kt)("strong",{parentName:"a"},"Requirements"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#objectives"},(0,r.kt)("strong",{parentName:"a"},"Objectives"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#web-api"},(0,r.kt)("strong",{parentName:"a"},"Web API"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#soa"},(0,r.kt)("strong",{parentName:"a"},"SOA"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#exercise-1-graphql-queries"},(0,r.kt)("strong",{parentName:"a"},"Exercise 1: GraphQL Queries")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create-solution-and-project"},(0,r.kt)("strong",{parentName:"a"},"Create Solution and Project"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#run-and-test-project"},(0,r.kt)("strong",{parentName:"a"},"Run and test project"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#exercise-2-graphql-mutations"},(0,r.kt)("strong",{parentName:"a"},"Exercise 2: GraphQL Mutations")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#run-and-test-project-1"},(0,r.kt)("strong",{parentName:"a"},"Run and test project")))))))),(0,r.kt)("h3",{id:"requirements"},(0,r.kt)("strong",{parentName:"h3"},"Requirements")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://dotnet.microsoft.com/en-us/download"},".NET 7 SDK")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.postman.com/downloads/"},"Postman application"))),(0,r.kt)("h3",{id:"objectives"},(0,r.kt)("strong",{parentName:"h3"},"Objectives")),(0,r.kt)("p",null,"In this LAB you will learn about different web api designs and how to implement them."),(0,r.kt)("h3",{id:"web-api"},(0,r.kt)("strong",{parentName:"h3"},"Web API")),(0,r.kt)("p",null,"A ",(0,r.kt)("strong",{parentName:"p"},"Web API")," is an application programming interface for either a web server or a web browser.\nIt is a web development concept, usually limited to a web application's client-side (including any web frameworks being used),\nand thus usually does not include web server or browser implementation details such as SAPIs or APIs unless publicly accessible by a remote web application."),(0,r.kt)("h3",{id:"soa"},(0,r.kt)("strong",{parentName:"h3"},"SOA")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"SOA")," or Service-Oriented Architecture is a style of software design in\nto which defined services provide service to other application components over the network protocol.\n",(0,r.kt)("strong",{parentName:"p"},"SOA")," is technology, product and platform independent."),(0,r.kt)("p",null,"According to the definition of service-oriented architecture, a service is defined by the following properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"describes business logic with a specific outcome"),(0,r.kt)("li",{parentName:"ul"},"the service is self-contained"),(0,r.kt)("li",{parentName:"ul"},"the logic is isolated from the consumer, the consumer does not need to know the implementation details"),(0,r.kt)("li",{parentName:"ul"},"may include other services.")),(0,r.kt)("p",null,"Common views on SOA architecture are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"REST")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"GraphQL")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"gRPC")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"SOAP")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"WCF"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"REST")," architecture is most commonly used and easiest to implement because all modern web server frameworks support it by default."),(0,r.kt)("p",null,"We have worked on REST in past labs and in this lab we will focus on ",(0,r.kt)("strong",{parentName:"p"},"GraphQL")," abd ",(0,r.kt)("strong",{parentName:"p"},"gRPC"),"."),(0,r.kt)("h2",{id:"exercise-1-graphql-queries"},(0,r.kt)("strong",{parentName:"h2"},"Exercise 1: GraphQL Queries")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"GraphQL")," is an open source language for data processing and manipulation.\n",(0,r.kt)("strong",{parentName:"p"},"GraphQL")," allows clients to define the structure of the data returned by the server,\nand thus prevents large amounts of unnecessary data from being transferred,\nhowever this reduces effectiveness save query cache."),(0,r.kt)("p",null,"GraphQL consists of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"data types"),(0,r.kt)("li",{parentName:"ul"},"query language (SDL)"),(0,r.kt)("li",{parentName:"ul"},"execution semantics"),(0,r.kt)("li",{parentName:"ul"},"static validations"),(0,r.kt)("li",{parentName:"ul"},"introspection of data types.")),(0,r.kt)("p",null,"Supported operations are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"reading"),(0,r.kt)("li",{parentName:"ul"},"writing"),(0,r.kt)("li",{parentName:"ul"},"subscription via web hook.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"GraphQL")," has two main approaches:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Schema First Approach",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The Schema first approach relies upon the GraphQL schema language, coding conventions, and tries to provide a minimal amount of syntax."),(0,r.kt)("li",{parentName:"ul"},"It is the easiest to get started though it does not currently support some advanced scenarios."))),(0,r.kt)("li",{parentName:"ul"},"Graph Type Approach",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The GraphType first approach can be more verbose, but gives you access to all of the provided properties of your GraphType's and Schema."),(0,r.kt)("li",{parentName:"ul"},"You are required to use inheritance to leverage that functionality.")))),(0,r.kt)("p",null,"In this exercise you will use Graph Type Spproach."),(0,r.kt)("h3",{id:"create-solution-and-project"},(0,r.kt)("strong",{parentName:"h3"},"Create Solution and Project")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create new solution ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesign"),", new webapi project ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesign.GraphQlApi")," and new class library project ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesign.Model"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"dotnet new sln --name WebApiDesign\ndotnet new classlib --name WebApiDesign.Model\ndotnet new webapi --name WebApiDesign.GraphQlApi\n")),(0,r.kt)("p",null,"Add Projects to solution and add reference to project ",(0,r.kt)("inlineCode",{parentName:"p"},"WebApiDesign.Model")," in project ",(0,r.kt)("inlineCode",{parentName:"p"},"WebApiDesign.GraphQlApi")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"dotnet sln add WebApiDesign.Model/WebApiDesign.Model.csproj\ndotnet sln add WebApiDesign.GraphQlApi/WebApiDesign.GraphQlApi.csproj\ndotnet add WebApiDesign.GraphQlApi/WebApiDesign.GraphQlApi.csproj reference WebApiDesign.Model/WebApiDesign.Model.csproj\n")),(0,r.kt)("p",null,"Add GraphQL packages to ",(0,r.kt)("inlineCode",{parentName:"p"},"WebApiDesign.GraphQlApi")," project:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"dotnet add WebApiDesign.GraphQlApi/WebApiDesign.GraphQlApi.csproj package GraphQL\ndotnet add WebApiDesign.GraphQlApi/WebApiDesign.GraphQlApi.csproj package GraphQL.SystemTextJson\ndotnet add WebApiDesign.GraphQlApi/WebApiDesign.GraphQlApi.csproj package GraphQL.MicrosoftDI\ndotnet add WebApiDesign.GraphQlApi/WebApiDesign.GraphQlApi.csproj package GraphQL.Server.Transports.AspNetCore\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In project ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesign.Model")," add class and file ",(0,r.kt)("inlineCode",{parentName:"li"},"Subject"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"namespace WebApiDesign.Model;\n\npublic class Subject\n{\n    public Subject(int id, string name, int ect)\n    {\n        Id = id;\n        Name = name;\n        Ect = ect;\n    }\n\n    public int Id { get; }\n\n    public string Name { get; }\n\n    public int Ect { get; }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In project ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesign.Model")," add class and file ",(0,r.kt)("inlineCode",{parentName:"li"},"Student"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"namespace WebApiDesign.Model;\n\npublic class Student\n{\n    public Student(\n        int id,\n        string name,\n        DateOnly dob,\n        IEnumerable<double> grades,\n        IEnumerable<Subject> subjects)\n    {\n        Id = id;\n        Name = name;\n        Dob = dob;\n        Grades = grades;\n        Subjects = subjects;\n    }\n\n    public int Id { get; }\n\n    public string Name { get; }\n\n    public DateOnly Dob { get; }\n\n    public IEnumerable<double> Grades { get; }\n\n    public IEnumerable<Subject> Subjects { get; }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In project ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesign.Model")," add class and file ",(0,r.kt)("inlineCode",{parentName:"li"},"StudentsRepository"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'namespace WebApiDesign.Model;\n\npublic class StudentsRepository\n{\n\n    private readonly IEnumerable<Subject> _subjects = new[]\n    {\n        new Subject(1, "PIZ", 10),\n        new Subject(2, "DIS", 12),\n    };\n\n    private readonly ICollection<Student> _students;\n\n    public StudentsRepository(int numberOfStudents)\n    {\n        _students = Enumerable\n            .Range(0, numberOfStudents)\n            .Select(index => new Student(\n                id: index,\n                name: $"Student{index}",\n                dob: new DateOnly(1999, 1, 1),\n                grades: new[] { 2d, 3d, 4d, 4d },\n                subjects: _subjects))\n            .ToList();\n    }\n\n    public IEnumerable<Student> GetAllStudents()\n    {\n        return _students;\n    }\n\n    public Student? GetStudent(int id)\n    {\n        return _students.FirstOrDefault(student => student.Id == id);\n    }\n\n    public void CreateStudent(string name)\n    {\n        var id = _students.Max(s => s.Id) + 1;\n\n        var student = new Student(\n            id: id,\n            name: name,\n            dob: new DateOnly(1999, 1, 1),\n            grades: new[] { 2d, 5d, 3d, 4d },\n            subjects: _subjects);\n\n        _students.Add(student);\n    }\n\n    public void UpdateStudent(int id, string newName)\n    {\n        var studentToUpdate = _students.FirstOrDefault(student => student.Id == id);\n\n        if (studentToUpdate is null)\n        {\n            throw new Exception("Student was not found");\n        }\n\n        var updatedStudent = new Student(\n            id: studentToUpdate.Id,\n            name: newName,\n            dob: studentToUpdate.Dob,\n            grades: studentToUpdate.Grades,\n            subjects: studentToUpdate.Subjects);\n\n        _ = _students.Remove(studentToUpdate);\n\n        _students.Add(updatedStudent);\n    }\n\n    public void DeleteStudent(int id)\n    {\n        var studentToDelete = _students.FirstOrDefault(student => student.Id == id);\n\n        if (studentToDelete is null)\n        {\n            throw new Exception("Student was not found");\n        }\n\n        _ = _students.Remove(studentToDelete);\n    }\n}\n\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In project ",(0,r.kt)("inlineCode",{parentName:"p"},"WebApiDesign.GraphQlApi")," create folder ",(0,r.kt)("inlineCode",{parentName:"p"},"GraphQlTypes"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In folder ",(0,r.kt)("inlineCode",{parentName:"p"},"GraphQlTypes")," create file ",(0,r.kt)("inlineCode",{parentName:"p"},"SubjectType.cs")," with following contents:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"using GraphQL.Types;\nusing WebApiDesign.Model;\n\nnamespace WebApiDesign.GraphQlApi.GraphQlTypes;\n\npublic class SubjectType : ObjectGraphType<Subject>\n{\n\n    public SubjectType()\n    {\n        Name = nameof(Subject);\n        _ = Field(s => s.Id);\n        _ = Field(s => s.Name, nullable: false);\n        _ = Field(s => s.Ect);\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In folder ",(0,r.kt)("inlineCode",{parentName:"li"},"GraphQlTypes")," create file ",(0,r.kt)("inlineCode",{parentName:"li"},"StudentType.cs")," with following contents:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"using GraphQL.Types;\nusing WebApiDesign.Model;\n\nnamespace WebApiDesign.GraphQlApi.GraphQlTypes;\n\npublic class StudentType : ObjectGraphType<Student>\n{\n    public StudentType()\n    {\n        Name = nameof(Student);\n        _ = Field(s => s.Id);\n        _ = Field(s => s.Name, nullable: false);\n        _ = Field(s => s.Dob);\n        _ = Field(s => s.Grades, nullable: false);\n        _ = Field<ListGraphType<SubjectType>>(nameof(Student.Subjects));\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In folder ",(0,r.kt)("inlineCode",{parentName:"li"},"GraphQlTypes")," create file ",(0,r.kt)("inlineCode",{parentName:"li"},"StudentQuery.cs")," with following contents:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'using GraphQL;\nusing GraphQL.Types;\nusing WebApiDesign.Model;\n\nnamespace WebApiDesign.GraphQlApi.GraphQlTypes;\n\npublic class StudentQuery : ObjectGraphType\n{\n    public StudentQuery(StudentsRepository studentsRepository)\n    {\n        Name = nameof(StudentQuery);\n        _ = Field<ListGraphType<StudentType>>("getStudents")\n            .Resolve(_ =>\n            {\n                return studentsRepository.GetAllStudents();\n            });\n\n        _ = Field<StudentType>("getStudent")\n            .Argument<IntGraphType>("id")\n            .Resolve(resolveFieldContext =>\n            {\n                var studentId = resolveFieldContext.GetArgument<int>("id");\n\n                return studentsRepository.GetStudent(studentId);\n            });\n    }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In folder ",(0,r.kt)("inlineCode",{parentName:"li"},"GraphQlTypes")," create file ",(0,r.kt)("inlineCode",{parentName:"li"},"StudentMutations.cs")," with following contents:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"using GraphQL;\nusing GraphQL.Types;\nusing WebApiDesign.Model;\n\nnamespace WebApiDesign.GraphQlApi.GraphQlTypes;\n\npublic class StudentMutation : ObjectGraphType\n{\n    public StudentMutation(StudentsRepository studentsRepository)\n    {\n        // TODO: Implement\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In folder ",(0,r.kt)("inlineCode",{parentName:"li"},"GraphQlTypes")," create file ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesignSchema.cs")," with following contents:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"using GraphQL.Types;\n\nnamespace WebApiDesign.GraphQlApi.GraphQlTypes;\n\npublic class WebApiDesignSchema : Schema\n{\n\n    public WebApiDesignSchema(IServiceProvider serviceProvider) : base(serviceProvider)\n    {\n        Query = serviceProvider.GetRequiredService<StudentQuery>();\n        //Mutation = serviceProvider.GetRequiredService<StudentMutation>();\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In project ",(0,r.kt)("inlineCode",{parentName:"p"},"WebApiDesign.GraphQlApi")," delete folder ",(0,r.kt)("inlineCode",{parentName:"p"},"Controllers")," and file ",(0,r.kt)("inlineCode",{parentName:"p"},"WeatherForecast.cs"),":")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Modify file ",(0,r.kt)("inlineCode",{parentName:"p"},"Program")," to look as following:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"using GraphQL;\nusing GraphQL.MicrosoftDI;\nusing GraphQL.Types;\nusing WebApiDesign.GraphQlApi.GraphQlTypes;\nusing WebApiDesign.Model;\n\nvar builder = WebApplication.CreateBuilder(args);\n\nbuilder.Services.AddSingleton(_ => new StudentsRepository(100));\nbuilder.Services.AddGraphQL(builder =>\n{\n    builder.AddSystemTextJson()\n        .AddErrorInfoProvider(errorInfoProvider =>\n        {\n#if DEBUG\n            errorInfoProvider.ExposeData = true;\n            errorInfoProvider.ExposeExceptionDetails = true;\n            errorInfoProvider.ExposeExceptionDetails = true;\n            errorInfoProvider.ExposeExceptionDetailsMode = GraphQL.Execution.ExposeExceptionDetailsMode.Message;\n#endif\n        })\n        .AddSchema<WebApiDesignSchema>();\n});\nbuilder.Services.AddSingleton<ISchema, WebApiDesignSchema>(servicesProvider => new WebApiDesignSchema(new SelfActivatingServiceProvider(servicesProvider)));\n\nvar app = builder.Build();\n\napp.UseGraphQL<ISchema>();\n\napp.Run();\n")),(0,r.kt)("h3",{id:"run-and-test-project"},(0,r.kt)("strong",{parentName:"h3"},"Run and test project")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Using postman application test query ",(0,r.kt)("inlineCode",{parentName:"li"},"getStudents"),":")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"postman-get-students-graphql-query",src:t(6860).Z,width:"1537",height:"972"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Using postman application test query ",(0,r.kt)("inlineCode",{parentName:"li"},"getStudent"),":")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"postman-get-student-graphql-query-1",src:t(8663).Z,width:"1547",height:"911"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In query ",(0,r.kt)("inlineCode",{parentName:"li"},"getStudent")," edit GraphQL request body to look like this")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},"{ \n    getStudent(id: 1) {\n        id,\n        name,\n        dob,\n        subjects {\n            id,\n            name,\n            ect\n        }\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Observe changes after executing request again:")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"postman-get-student-graphql-query-2",src:t(4106).Z,width:"1541",height:"986"})),(0,r.kt)("h2",{id:"exercise-2-graphql-mutations"},(0,r.kt)("strong",{parentName:"h2"},"Exercise 2: GraphQL Mutations")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In folder ",(0,r.kt)("inlineCode",{parentName:"li"},"GraphQlTypes")," modify file ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesignSchema.cs")," with following contents:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"using GraphQL.Types;\n\nnamespace WebApiDesign.GraphQlApi.GraphQlTypes;\n\npublic class WebApiDesignSchema : Schema\n{\n\n    public WebApiDesignSchema(IServiceProvider serviceProvider) : base(serviceProvider)\n    {\n        Query = serviceProvider.GetRequiredService<StudentQuery>();\n        Mutation = serviceProvider.GetRequiredService<StudentMutation>();\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In project ",(0,r.kt)("inlineCode",{parentName:"li"},"WebApiDesign.GraphQlApi")," in folder ",(0,r.kt)("inlineCode",{parentName:"li"},"GraphQlTypes")," implement class ",(0,r.kt)("inlineCode",{parentName:"li"},"StudentMutation"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"using GraphQL;\nusing GraphQL.Types;\nusing WebApiDesign.Model;\n\nnamespace WebApiDesign.GraphQlApi.GraphQlTypes;\n\npublic class StudentMutation : ObjectGraphType\n{\n    public StudentMutation(StudentsRepository studentsRepository)\n    {\n        // TODO: Implement\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Add field ",(0,r.kt)("inlineCode",{parentName:"p"},"createStudent")," which creates new student using ",(0,r.kt)("inlineCode",{parentName:"p"},"studentsRepository")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"It receives non nullable string argument ",(0,r.kt)("inlineCode",{parentName:"li"},"name")),(0,r.kt)("li",{parentName:"ul"},"It returns created student"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Add field ",(0,r.kt)("inlineCode",{parentName:"p"},"updateStudent")," which updates student using ",(0,r.kt)("inlineCode",{parentName:"p"},"studentsRepository")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"It receives int argument ",(0,r.kt)("inlineCode",{parentName:"li"},"id")),(0,r.kt)("li",{parentName:"ul"},"It receives non nullable string argument ",(0,r.kt)("inlineCode",{parentName:"li"},"name")),(0,r.kt)("li",{parentName:"ul"},"It returns updated student"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Add field ",(0,r.kt)("inlineCode",{parentName:"p"},"deleteStudent")," which deletes student using ",(0,r.kt)("inlineCode",{parentName:"p"},"studentsRepository")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"It receives int argument ",(0,r.kt)("inlineCode",{parentName:"li"},"id")),(0,r.kt)("li",{parentName:"ul"},"It returns deleted student")))),(0,r.kt)("h3",{id:"run-and-test-project-1"},(0,r.kt)("strong",{parentName:"h3"},"Run and test project")),(0,r.kt)("p",null,"Run and test project using Postman application."))}d.isMDXComponent=!0},8663:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/postman-get-student-graphql-query-1-625b4d9c55a7969f41d63320ecc6a0c6.jpg"},4106:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/postman-get-student-graphql-query-2-0ec0154d7ecff42fde44cbc27361ddbe.jpg"},6860:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/postman-get-students-graphql-query-027fb6686881dc804b287cf8b63b1eb0.jpg"}}]);